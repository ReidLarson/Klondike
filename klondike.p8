pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
deck={}

function _init()
	createdeck()	
	shuffle()
end

function _update()
end

function _draw()
 cls()
 rectfill(0,0,128,128,5)
 for i=1,7 do
  local isfaceup = flr(rnd(2)) > 0
  --deck[i].isfaceup = isfaceup
  deck[i].isfaceup = true
  rendercard(deck[i],(i-1)*16,2)
 end
end

--createcard
function createcard(suit,rank)
 local card = {}
 card.suit = suit
 card.rank = rank
 card.isfaceup = false
 card.loc = "deck"
 return card
end

--generates a deck of 52 cards
function createdeck()
	for i=1,4 do
		for j=1,13 do
			add(deck,createcard(i,j))
		end
	end
end

--shuffle deck
function shuffle()
 local shuffled = {}
 --print(rnd(#deck+1))
 while(#deck > 0) do
  local card = deck[flr(rnd(#deck+1))]
  add(shuffled,card)
  del(deck,card)
  shuffled[#shuffled].isfaceup = false
  shuffled[#shuffled].loc = "deck"
 end
 deck = shuffled
end

function rendercard(card,x,y)
	palt(0,false)
	palt(15,true)
	if card.isfaceup then
	 --card back
	 spr(14,x,y)
	 spr(15,x+8,y)
	 spr(30,x,y+8)
	 spr(31,x+8,y+8)
	 
	 spr(card.suit+20,x+5,y+8)
	 spr(card.rank,x+1,y+1)
	else
	 spr(46,x,y)
	 spr(47,x+8,y)
	 spr(62,x,y+8)
	 spr(63,x+8,y+8)
	end
 
 palt()
end
__gfx__
00000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7777777777fff
00000000fff000fffff000fffff000fffffff0ffff00000ffff000ffff00000ffff000fffff000ffff0ff0ffff00000ffff000ffff0fff0fff777777777777ff
00700700ff0fff0fff0fff0fff0fff0fffff00ffff0fffffff0ffffffffff0ffff0fff0fff0fff0ff00f0f0ffffff0ffff0fff0fff0ff0fff77777777777777f
00077000ff0fff0ffffff0fffffff0fffff0f0fffff000ffff0000ffffff0ffffff000ffff0fff0fff0f0f0ffffff0ffff0fff0fff0ff0fff77777777777777f
00077000ff00000fffff0fffffffff0fff00000fffffff0fff0fff0ffff000ffff0fff0ffff0000fff0f0f0ffffff0ffff0f0f0fff000ffff77777777777777f
00700700ff0fff0ffff0ffffff0fff0ffffff0ffff0fff0fff0fff0fffff0fffff0fff0fffffff0fff0f0f0fff0ff0ffff0ff0ffff0ff0fff77777777777777f
00000000ff0fff0fff00000ffff000fffffff0fffff000fffff000ffffff0ffffff000fffff000fff000f0fffff00ffffff00f0fff0fff0ff77777777777777f
00000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff77777777777777f
0000000000000000000000000000000000000000ffff8ffffff00fffffffffffffff0fff0000000000000000000000000000000000000000f77777777777777f
0000000000000000000000000000000000000000fff888ffff0000ffff88f88ffff000ff0000000000000000000000000000000000000000f77777777777777f
0000000000000000000000000000000000000000ff88888fff0000fff8888888ff00000f0000000000000000000000000000000000000000f77777777777777f
0000000000000000000000000000000000000000f8888888f0f00f0ff8888888f00000000000000000000000000000000000000000000000f77777777777777f
0000000000000000000000000000000000000000ff88888f00000000ff88888fff00000f0000000000000000000000000000000000000000f77777777777777f
0000000000000000000000000000000000000000fff888ff00000000fff888ffffff0fff0000000000000000000000000000000000000000f77777777777777f
0000000000000000000000000000000000000000ffff8ffff00ff00fffff8fffff00f00f0000000000000000000000000000000000000000ff777777777777ff
0000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000fff7777777777fff
00000000000000000000000000000000000000000000000000000000ffffffff000000000000000000000000000000000000000000000000fff11c111c111fff
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff11c111c111c1ff
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f11c111c111c111f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f1c111c111c111cf
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fc111c111c111c1f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f111c111c111c11f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f11c111c111c111f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f1c111c111c111cf
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fc111c111c111c1f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f111c111c111c11f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f11c111c111c111f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f1c111c111c111cf
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fc111c111c111c1f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f111c111c111c11f
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff1c111c111c11ff
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fff111c111c11fff
